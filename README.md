# AEM project template

This is an AEM based project to render movie data using the IMDB API and Youtube API.
MYSite project is build on the maven archetype with aem version = cloud

## Modules

The main parts of the template are:

* core: Java bundle containing all core functionality like OSGi services, listeners or schedulers, as well as component-related Java code such as servlets or request filters.
* it.tests: Java based integration tests
* ui.apps: contains the /apps (and /etc) parts of the project, ie JS&CSS clientlibs, components, and templates
* ui.content: contains sample content using the components from the ui.apps
* ui.config: contains runmode specific OSGi configs for the project
* ui.frontend: an optional dedicated front-end build mechanism (Angular, React or general Webpack project)
* ui.tests: Selenium based UI tests
* all: a single content package that embeds all of the compiled modules (bundles and content packages) including any vendor dependencies
* analyse: this module runs analysis on the project which provides additional validation for deploying into AEMaaCS

## AEM Component

The AEM component name is movie-trailer:
* /mysite.ui.apps/src/main/content/jcr_root/apps/mysite/components/movie-trailer

The component is using fetchAPI to invoke the servlet.
The Json response is rendered as part of console log.

## ClientLibs

* Clientlibs: categories = [mysite.wcm.components.search.v1]

## Core files

* MovieServlet.java - Servlet used to invoke the APIs
* MovieApiService.java - provide the OSGI configuration for the API Url and Keys.
* MoviesResultsApi.java - Logic to integrate both api response.
* MySiteConstants.java - Constants used in the files.

Using the Swagger plugin to auto generate the code for mapping the Output json

* /mysite/api/movieResults.yaml
* Plugin added to pom.xml and build path configured in <exclusions></exclusions>
* autogenerated code under - /mysite.core/target/generated-sources/src/main/java

Using jackson library to render the json.

## ui.config

* Runmode configs for the MovieApiConfig for author and publish runmode.
* The Api keys in the config files are Configured with Secret configuration values.
* To execute API keys are required.

## Testing

Junit Tests with coverage of more than 90%.

## Improvements

* OAuth authentication usage for api.
* We can use in memory cache to cache the token generated in the above case.
* The component needs to render the results data in presentable format.


